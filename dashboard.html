<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QUANTUM RIO INVESTMENT ‚Äì Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Firebase SDK (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-compat.js"></script>
<script>
  const firebaseConfig = {
  apiKey: "AIzaSyC6jW448tW3e8m6XVGjOegT8IGJQJERweY",
  authDomain: "quantum-rio-uganda.firebaseapp.com",
  databaseURL: "https://quantum-rio-uganda-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "quantum-rio-uganda",
  storageBucket: "quantum-rio-uganda.appspot.com",
  messagingSenderId: "840875099079",
  appId: "1:840875099079:web:1cd06a78276842a787cfe2",
  measurementId: "G-97G1PNQ9JB"
};
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db   = firebase.database();
</script>

<style>
  body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background:#001f3f;
    color:#fff;
  }
  /* was 4cm, now 1cm */
  .page-content{ padding-bottom:1cm; }

  header{
    background:#002f6c;
    display:flex;
    align-items:center;
    gap:10px;
    padding:12px 16px;
  }
  header img{height:32px;}
  header h2{margin:0;font-size:1.2rem;}

  .announcement{
    background:#003366;
    color:#ff0;
    padding:8px;
    white-space:nowrap;
    overflow:hidden;
  }
  .announcement span{
    display:inline-block;
    padding-left:100%;
    animation:scroll 16s linear infinite;
  }
  @keyframes scroll{
    0%{transform:translateX(0);}
    100%{transform:translateX(-100%);}
  }

  .balance-section{
    text-align:center;
    background:#002b5c;
    padding:18px 12px;
  }
  .balance-section .email{font-size:0.85rem;color:#ffa500;}
  .balance-section .balance{font-size:1.4rem;margin:8px 0;color:#ffcc00;}

  .balance-buttons{
    display:flex;
    justify-content:space-around;
    margin-top:10px;
  }
  .balance-buttons button{
    background:#ffcc00;
    color:#000;
    border:none;
    border-radius:8px;
    padding:8px 0;
    width:90px;
    font-weight:600;
    cursor:pointer;
  }

  .extra-info{text-align:center;padding:16px;}
  .extra-info img{max-width:92%;border-radius:8px;margin-bottom:12px;}
  .extra-info p{font-size:0.9rem;line-height:1.4;}
  .claim-btn{
    background:#ffcc00;
    color:#000;
    font-weight:700;
    border:none;
    border-radius:8px;
    padding:8px 18px;
    cursor:pointer;
  }

  .task-countdown{
    background:#001a33;
    text-align:center;
    padding:8px;
    font-weight:600;
    color:#ffcc00;
  }

  .earnings-card{
    margin:12px;
    background:rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.05);
    border-radius:10px;
    padding:12px;
  }
  .earnings-card h3{margin:0 0 6px 0;color:#ffd965;}
  .earnings-list{max-height:160px;overflow-y:auto;padding:6px 0;}
  .earnings-list .row{
    display:flex;
    justify-content:space-between;
    padding:4px 0;
    color:#cfe6ff;
    border-bottom:1px dotted rgba(255,255,255,0.05);
  }
  .earnings-total{text-align:right;margin-top:6px;font-weight:700;color:#fff;}

  .vip-list{padding:10px;}
  .vip-box{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#003366;
    padding:10px;
    margin:6px 0;
    border-radius:8px;
  }
  .vip-box img{height:38px;}
  .vip-box .info{flex-grow:1;margin-left:8px;}
  .vip-box .info .amount{font-weight:600;color:#ffcc00;}
  .vip-box .arrow{font-size:22px;cursor:pointer;}

  nav{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    display:flex;
    justify-content:space-around;
    background:#002244;
    padding:8px 0;
  }
  nav a{
    color:#fff;
    text-decoration:none;
    text-align:center;
    font-size:0.8rem;
  }
  nav i{font-size:18px;}

  .popup{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#28a745;
    color:#fff;
    padding:16px 20px;
    border-radius:8px;
    font-weight:600;
    z-index:9999;
    text-align:center;
  }
  .popup.red{background:#cc0000;}
</style>
</head>
<body>

<div class="page-content">
  <header>
    <img src="https://png.pngtree.com/png-clipart/20221216/original/pngtree-vip-icon-design-png-image_8749175.png" alt="logo">
    <h2>QUANTUM RIO INVESTMENT</h2>
  </header>

  <div class="announcement"><span>üõíWelcome to QUANTUM RIO INVESTMENT üõí Recruiting investors and agents worldwide!</span></div>

  <div class="balance-section">
    <div class="email" id="user-email">loading...</div>
    <div class="balance" id="user-balance">Balance: UGX 0</div>
    <div class="balance-buttons">
      <button onclick="location.href='deposit.html'">Deposit</button>
      <button onclick="location.href='withdraw.html'">Withdraw</button>
      <button onclick="location.href='company.html'">Company</button>
    </div>
  </div>

  <div class="extra-info">
    <img src="https://media.istockphoto.com/id/841526170/photo/three-business-people-in-the-office-working-together.jpg?s=170667a&w=0&k=20&c=58v5HeRzpzV3qusfD33JuF0j4Am5rbBYhkc37ozCv84=">
    <p>
      Improve VIP task rules on the same day. Upgrading the VIP level on the same day allows you to complete multiple tasks without restriction.
      You are now VIP1 and have completed today's task. You can upgrade to VIP2 to continue completing VIP2 tasks. Highest VIP level is VIP10.
    </p>
    <button class="claim-btn" id="claim-btn">Claim 100 UGX</button>
  </div>

  <div class="task-countdown">Task Reset Countdown: <span id="countdown"></span></div>

  <div class="earnings-card">
    <h3>VIP Earnings Breakdown</h3>
    <div class="earnings-list" id="earnings-list"></div>
    <div class="earnings-total" id="vip-grand-total">Total VIP Earnings: UGX 0</div>
  </div>

  <div class="vip-list" id="vip-list"></div>
</div>

<nav>
  <a href="#"><i class="fas fa-home"></i><br>Home</a>
  <a href="#"><i class="fas fa-tasks"></i><br>Task</a>
  <a href="#"><i class="fas fa-users"></i><br>Team</a>
  <a href="#"><i class="fas fa-crown"></i><br>VIP</a>
  <a href="#"><i class="fas fa-user"></i><br>Me</a>
</nav>

<script>
auth.onAuthStateChanged(user=>{
  if(!user){window.location='signin.html';return;}
  const uid=user.uid;
  document.getElementById('user-email').textContent=user.email;

  const balRef=db.ref('users/'+uid+'/balance');
  balRef.on('value',snap=>{
    const bal=parseFloat(snap.val()||0);
    // thousand separators
    document.getElementById('user-balance').textContent=`Balance: UGX ${bal.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})}`;
  });

  const vipSimple={1:750,2:1250,3:2750,4:5250,5:9375,6:18750,7:28250,8:37750,9:50000,10:62500};
  const vipClaims=db.ref('users/'+uid+'/vipClaims');
  vipClaims.on('value',snap=>{
    const claims=snap.val()||{};
    const list=document.getElementById('earnings-list');
    list.innerHTML='';
    let total=0;
    for(let i=1;i<=10;i++){
      const days=(claims[i]&&claims[i].daysClaimed)?parseInt(claims[i].daysClaimed):0;
      const earned=days*(vipSimple[i]||0);
      total+=earned;
      const row=document.createElement('div');
      row.className='row';
      row.innerHTML=`<div>VIP ${i}</div><div>UGX ${earned.toLocaleString()}</div>`;
      list.appendChild(row);
    }
    document.getElementById('vip-grand-total').textContent=`Total VIP Earnings: UGX ${total.toLocaleString()}`;
  });

  const vipList=document.getElementById('vip-list');
  const vipAmounts=[3000,5000,11000,21000,36000,75000,113000,151000,200000,250000];
  const vipRef=db.ref('users/'+uid+'/vipLevels');
  vipRef.on('value',snap=>{
    const unlocked=snap.val()||[];
    vipList.innerHTML='';
    vipAmounts.forEach((amt,idx)=>{
      const lvl=idx+1;
      const box=document.createElement('div');
      box.className='vip-box';
      box.innerHTML=`
        <img src="https://png.pngtree.com/png-clipart/20221216/original/pngtree-vip-icon-design-png-image_8749175.png">
        <div class="info">
          <p>Unlock amount: <span class="amount">UGX ${amt.toLocaleString(undefined,{minimumFractionDigits:2})}</span></p>
          <p>${unlocked.includes(lvl)?"‚úÖ":"üîê"} VIP${lvl}</p>
        </div>
        <div class="arrow">¬ª</div>
      `;
      box.querySelector('.arrow').onclick=()=>showPopup(unlocked.includes(lvl)?"VIP already unlocked":"Please unlock your VIP first",!unlocked.includes(lvl));
      vipList.appendChild(box);
    });
  });

  const claimBtn=document.getElementById('claim-btn');
  const claimedRef=db.ref('users/'+uid+'/hasClaimedBonus');
  claimedRef.once('value').then(s=>{
    if(s.val()){claimBtn.textContent='Completed';claimBtn.disabled=true;}
  });
  claimBtn.onclick=()=>{
    if(claimBtn.disabled)return;
    balRef.once('value').then(b=>{
      const bal=parseFloat(b.val()||0)+100;
      db.ref('users/'+uid).update({balance:bal,hasClaimedBonus:true});
      claimBtn.textContent='Completed';claimBtn.disabled=true;
      showPopup('100 UGX Claimed');
    });
  };

  startCountdown();
});

function startCountdown(){
  const c=document.getElementById('countdown');
  let start=localStorage.getItem('cStart')||Date.now();
  localStorage.setItem('cStart',start);
  setInterval(()=>{
    let diff=86400000-(Date.now()-start);
    if(diff<=0){start=Date.now();localStorage.setItem('cStart',start);diff=86400000;}
    const h=Math.floor(diff/3600000),m=Math.floor((diff%3600000)/60000),s=Math.floor((diff%60000)/1000);
    c.textContent=`${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
  },1000);
}
function showPopup(msg,red=false){
  const p=document.createElement('div');
  p.className='popup'+(red?' red':'');
  p.textContent=msg;
  document.body.appendChild(p);
  setTimeout(()=>p.remove(),3000);
}
</script>
</body>
</html>
